(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{4473:function(n,e,t){Promise.resolve().then(t.bind(t,4158))},4158:function(n,e,t){"use strict";t.d(e,{default:function(){return N}});var a=t(3315),s=t(842),i=t(1646),o=t(3404),c=t(7580),r=t(8977),l=t(5609),d=JSON.parse('{"address":"ELETaimWWRFVk64LSyfNMWhXGPSvZL2mxf3dbqhBcdKX","metadata":{"name":"solanavotingapp","version":"0.1.0","spec":"0.1.0","description":"Created with Anchor"},"instructions":[{"name":"close","discriminator":[98,165,201,177,108,65,206,96],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"solanavotingapp","writable":true}],"args":[]},{"name":"decrement","discriminator":[106,227,168,59,248,27,150,101],"accounts":[{"name":"solanavotingapp","writable":true}],"args":[]},{"name":"increment","discriminator":[11,18,104,9,104,174,59,33],"accounts":[{"name":"solanavotingapp","writable":true}],"args":[]},{"name":"initialize","discriminator":[175,175,109,31,13,152,155,237],"accounts":[{"name":"payer","writable":true,"signer":true},{"name":"solanavotingapp","writable":true,"signer":true},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[]},{"name":"set","discriminator":[198,51,53,241,116,29,126,194],"accounts":[{"name":"solanavotingapp","writable":true}],"args":[{"name":"value","type":"u8"}]}],"accounts":[{"name":"Solanavotingapp","discriminator":[172,197,241,21,134,139,208,247]}],"types":[{"name":"Solanavotingapp","type":{"kind":"struct","fields":[{"name":"count","type":"u8"}]}}]}');let u=new l.PublicKey(d.address);var m=t(8115),p=t(373),g=t(1465),h=t(6860),v=t(929),b=t(7170);function x(){let{connection:n}=(0,m.R)(),{cluster:e}=(0,b.xu)(),t=(0,o.pg)(),a=(0,i.j)(),s=(0,h.useMemo)(()=>(function(n){switch(n){case"devnet":case"testnet":return new l.PublicKey("ELETaimWWRFVk64LSyfNMWhXGPSvZL2mxf3dbqhBcdKX");default:return u}})(e.network),[e]),c=new r.$r(d,a),x=(0,p.a)({queryKey:["solanavotingapp","all",{cluster:e}],queryFn:()=>c.account.solanavotingapp.all()}),y=(0,p.a)({queryKey:["get-program-account",{cluster:e}],queryFn:()=>n.getParsedAccountInfo(s)}),f=(0,g.D)({mutationKey:["solanavotingapp","initialize",{cluster:e}],mutationFn:n=>c.methods.initialize().accounts({solanavotingapp:n.publicKey}).signers([n]).rpc(),onSuccess:n=>(t(n),x.refetch()),onError:()=>v.ZP.error("Failed to initialize account")});return{program:c,programId:s,accounts:x,getProgramAccount:y,initialize:f}}function y(){let{initialize:n}=x();return(0,a.jsxs)("button",{className:"btn btn-xs lg:btn-md btn-primary",onClick:()=>n.mutateAsync(l.Keypair.generate()),disabled:n.isPending,children:["Create ",n.isPending&&"..."]})}function f(){var n,e,t;let{accounts:s,getProgramAccount:i}=x();return i.isLoading?(0,a.jsx)("span",{className:"loading loading-spinner loading-lg"}):(null===(n=i.data)||void 0===n?void 0:n.value)?(0,a.jsx)("div",{className:"space-y-6",children:s.isLoading?(0,a.jsx)("span",{className:"loading loading-spinner loading-lg"}):(null===(e=s.data)||void 0===e?void 0:e.length)?(0,a.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:null===(t=s.data)||void 0===t?void 0:t.map(n=>(0,a.jsx)(j,{account:n.publicKey},n.publicKey.toString()))}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl",children:"No accounts"}),"No accounts found. Create one above to get started."]})}):(0,a.jsx)("div",{className:"alert alert-info flex justify-center",children:(0,a.jsx)("span",{children:"Program account not found. Make sure you have deployed the program and are on the correct cluster."})})}function j(n){var e;let{account:t}=n,{accountQuery:s,incrementMutation:i,setMutation:r,decrementMutation:l,closeMutation:d}=function(n){let{account:e}=n,{cluster:t}=(0,b.xu)(),a=(0,o.pg)(),{program:s,accounts:i}=x(),c=(0,p.a)({queryKey:["solanavotingapp","fetch",{cluster:t,account:e}],queryFn:()=>s.account.solanavotingapp.fetch(e)}),r=(0,g.D)({mutationKey:["solanavotingapp","close",{cluster:t,account:e}],mutationFn:()=>s.methods.close().accounts({solanavotingapp:e}).rpc(),onSuccess:n=>(a(n),i.refetch())}),l=(0,g.D)({mutationKey:["solanavotingapp","decrement",{cluster:t,account:e}],mutationFn:()=>s.methods.decrement().accounts({solanavotingapp:e}).rpc(),onSuccess:n=>(a(n),c.refetch())}),d=(0,g.D)({mutationKey:["solanavotingapp","increment",{cluster:t,account:e}],mutationFn:()=>s.methods.increment().accounts({solanavotingapp:e}).rpc(),onSuccess:n=>(a(n),c.refetch())}),u=(0,g.D)({mutationKey:["solanavotingapp","set",{cluster:t,account:e}],mutationFn:n=>s.methods.set(n).accounts({solanavotingapp:e}).rpc(),onSuccess:n=>(a(n),c.refetch())});return{accountQuery:c,closeMutation:r,decrementMutation:l,incrementMutation:d,setMutation:u}}({account:t}),u=(0,h.useMemo)(()=>{var n,e;return null!==(e=null===(n=s.data)||void 0===n?void 0:n.count)&&void 0!==e?e:0},[null===(e=s.data)||void 0===e?void 0:e.count]);return s.isLoading?(0,a.jsx)("span",{className:"loading loading-spinner loading-lg"}):(0,a.jsx)("div",{className:"card card-bordered border-base-300 border-4 text-neutral-content",children:(0,a.jsx)("div",{className:"card-body items-center text-center",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"card-title justify-center text-3xl cursor-pointer",onClick:()=>s.refetch(),children:u}),(0,a.jsxs)("div",{className:"card-actions justify-around",children:[(0,a.jsx)("button",{className:"btn btn-xs lg:btn-md btn-outline",onClick:()=>i.mutateAsync(),disabled:i.isPending,children:"Increment"}),(0,a.jsx)("button",{className:"btn btn-xs lg:btn-md btn-outline",onClick:()=>{var n;let e=window.prompt("Set value to:",null!==(n=u.toString())&&void 0!==n?n:"0");if(!(!e||parseInt(e)===u||isNaN(parseInt(e))))return r.mutateAsync(parseInt(e))},disabled:r.isPending,children:"Set"}),(0,a.jsx)("button",{className:"btn btn-xs lg:btn-md btn-outline",onClick:()=>l.mutateAsync(),disabled:l.isPending,children:"Decrement"})]}),(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("p",{children:(0,a.jsx)(c.Q1,{path:"account/".concat(t),label:(0,o.ZB)(t.toString())})}),(0,a.jsx)("button",{className:"btn btn-xs btn-secondary btn-outline",onClick:()=>{if(window.confirm("Are you sure you want to close this account?"))return d.mutateAsync()},disabled:d.isPending,children:"Close"})]})]})})})}function N(){let{publicKey:n}=(0,s.O)(),{programId:e}=x();return n?(0,a.jsxs)("div",{children:[(0,a.jsxs)(o.x0,{title:"Solanavotingapp",subtitle:'Create a new account by clicking the "Create" button. The state of a account is stored on-chain and can be manipulated by calling the program\'s methods (increment, decrement, set, and close).',children:[(0,a.jsx)("p",{className:"mb-6",children:(0,a.jsx)(c.Q1,{path:"account/".concat(e),label:(0,o.ZB)(e.toString())})}),(0,a.jsx)(y,{})]}),(0,a.jsx)(f,{})]}):(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsx)("div",{className:"hero py-[64px]",children:(0,a.jsx)("div",{className:"hero-content text-center",children:(0,a.jsx)(i.T,{})})})})}}},function(n){n.O(0,[45,99,596,652,268,259,559,672,292,744],function(){return n(n.s=4473)}),_N_E=n.O()}]);